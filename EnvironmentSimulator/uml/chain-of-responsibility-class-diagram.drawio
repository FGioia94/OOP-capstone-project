<mxfile host="app.diagrams.net">
  <diagram name="Chain of Responsibility - Class Diagram" id="chain-class-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- CommandHandler (Abstract Base) -->
        <mxCell id="commandhandler-abstract" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;abstract&amp;gt;&amp;gt;&lt;/i&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# next: CommandHandler&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ setNext(CommandHandler): void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handleAndMessage(String, Scanner, GameLoop): void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;i&gt;+ handle(String, Scanner, GameLoop): boolean&lt;/i&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# askFileName(Scanner): String&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# askFormat(Scanner): String&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# askAreYouSure(Scanner): boolean&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# isCancel(String): boolean&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# checkCancel(String): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=11;fontFamily=Helvetica;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="340" height="200" as="geometry"/>
        </mxCell>

        <!-- CommandChainBuilder -->
        <mxCell id="chainbuilder-class" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CommandChainBuilder&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- head: CommandHandler&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- tail: CommandHandler&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ add(CommandHandler): CommandChainBuilder&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ build(): CommandHandler&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=11;fontFamily=Helvetica;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="480" y="60" width="300" height="100" as="geometry"/>
        </mxCell>

        <!-- Concrete Handlers - Left Column -->
        
        <mxCell id="help-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;HelpCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="320" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="save-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SaveCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="400" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="load-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;LoadCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="480" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="exit-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ExitCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="560" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="continue-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ContinueCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="640" width="180" height="60" as="geometry"/>
        </mxCell>

        <!-- Concrete Handlers - Middle Column -->
        
        <mxCell id="spawn-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;SpawnCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- askSpecs(Scanner): Map&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="250" y="320" width="180" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="create-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CreateCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="250" y="410" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="delete-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;DeleteAnimalCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="250" y="490" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="pack-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;PackCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="250" y="570" width="180" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="clearanimals-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ClearAnimalsCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="250" y="650" width="180" height="60" as="geometry"/>
        </mxCell>

        <!-- Concrete Handlers - Right Column -->
        
        <mxCell id="clearmap-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ClearMapResourcesCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="460" y="320" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="listanimals-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ListAnimalsCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="460" y="400" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="listmap-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ListMapCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="460" y="480" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="listpacks-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ListPacksCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="460" y="560" width="220" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="inspect-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;InspectCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;@AdminOnly&lt;/i&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- inspectAnimal(...): void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- discoverFactories(): void&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- compareAnimals(...): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="460" y="640" width="220" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="invalid-handler" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;InvalidInputCommandHandler&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle(...): boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="460" y="760" width="220" height="60" as="geometry"/>
        </mxCell>

        <!-- Inheritance Relationships -->
        
        <mxCell id="edge-help" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="help-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge-save" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="save-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge-load" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="load-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge-exit" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="exit-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge-continue" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="continue-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge-spawn" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="spawn-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-create" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="create-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-delete" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="delete-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-pack" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="pack-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-clearanimals" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="clearanimals-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-clearmap" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="clearmap-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-listanimals" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="listanimals-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-listmap" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="listmap-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-listpacks" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="listpacks-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-inspect" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="inspect-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge-invalid" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;" edge="1" parent="1" source="invalid-handler" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="280"/>
              <mxPoint x="210" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Chain Relationship (self-reference) -->
        <mxCell id="edge-chain" value="next" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=0;entryX=1;entryY=0.25;exitX=1;exitY=0.75;dashed=0;" edge="1" parent="1" source="commandhandler-abstract" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="420" y="190"/>
              <mxPoint x="420" y="90"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Builder constructs chain -->
        <mxCell id="edge-builder" value="«builds»" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="chainbuilder-class" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="&lt;b&gt;Legend&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="840" y="40" width="340" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="legend-1" value="Abstract Handler: Chain base class" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="70" width="320" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-2" value="Builder: Constructs handler chain" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="100" width="320" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-3" value="Concrete Handlers: Process commands" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="130" width="320" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-4" value="Admin Handler: Reflection-based @AdminOnly" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="160" width="320" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-5" value="Fallback Handler: Catches invalid commands" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="190" width="320" height="25" as="geometry"/>
        </mxCell>

        <!-- Notes -->
        <mxCell id="note-1" value="&lt;b&gt;Chain of Responsibility Pattern&lt;/b&gt;&lt;br&gt;&lt;br&gt;Each handler decides whether to process a command or pass it to the next handler in the chain. The pattern decouples senders from receivers and allows multiple objects a chance to handle the request.&lt;br&gt;&lt;br&gt;&lt;b&gt;Key Components:&lt;/b&gt;&lt;br&gt;• &lt;b&gt;CommandHandler:&lt;/b&gt; Abstract base with next reference&lt;br&gt;• &lt;b&gt;Concrete Handlers:&lt;/b&gt; Each handles specific commands&lt;br&gt;• &lt;b&gt;CommandChainBuilder:&lt;/b&gt; Fluent API for chain construction&lt;br&gt;• &lt;b&gt;InvalidInputCommandHandler:&lt;/b&gt; Fallback at end of chain" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="840" y="270" width="340" height="220" as="geometry"/>
        </mxCell>

        <mxCell id="note-2" value="&lt;b&gt;Request Flow&lt;/b&gt;&lt;br&gt;&lt;br&gt;1. Client calls handleAndMessage() on first handler&lt;br&gt;2. Each handler checks if it can process the command&lt;br&gt;3. If yes: processes and returns true&lt;br&gt;4. If no: delegates to next handler via next.handle()&lt;br&gt;5. InvalidInputCommandHandler catches unhandled commands&lt;br&gt;&lt;br&gt;&lt;b&gt;Benefits:&lt;/b&gt;&lt;br&gt;• Reduced coupling between sender and receivers&lt;br&gt;• Flexible chain reconfiguration at runtime&lt;br&gt;• Single Responsibility: each handler has one job&lt;br&gt;• Open/Closed: add new handlers without modifying existing" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="840" y="520" width="340" height="260" as="geometry"/>
        </mxCell>

        <mxCell id="note-3" value="&lt;b&gt;Total Handlers: 14&lt;/b&gt;&lt;br&gt;&lt;br&gt;Game Commands: Help, Exit, Continue&lt;br&gt;State Management: Save, Load&lt;br&gt;Entity Operations: Create, Delete, Spawn, Pack&lt;br&gt;Information: ListAnimals, ListMap, ListPacks&lt;br&gt;Map Management: ClearAnimals, ClearMapResources&lt;br&gt;Admin Features: Inspect (Reflection API)&lt;br&gt;Fallback: InvalidInput" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="840" y="810" width="340" height="160" as="geometry"/>
        </mxCell>

        <!-- GameLoop Client -->
        <mxCell id="gameloop-client" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;GameLoop&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;(Client)&lt;/i&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- chain: CommandHandler&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handleUserInputs(): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=11;fontFamily=Helvetica;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1240" y="80" width="280" height="100" as="geometry"/>
        </mxCell>

        <!-- GameLoop uses chain -->
        <mxCell id="edge-gameloop" value="uses" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="gameloop-client" target="chainbuilder-class">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge-gameloop2" value="invokes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="gameloop-client" target="commandhandler-abstract">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1380" y="260"/>
              <mxPoint x="210" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
